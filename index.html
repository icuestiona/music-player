<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Player</title>
    <link href="src/style.css" rel="stylesheet" type="text/css" />
    <script
      src="https://kit.fontawesome.com/9157e1cfe3.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="container">
      <div class="music">
        <!-- Music player -->
        <div class="music-player">
          <!-- Header -->
          <div class="header">
            <nav>
              <div class="circle">
                <i class="fa-solid fa-music"></i>
              </div>
              <h2>Now playing</h2>
              <div class="circle">
                <i class="fa-solid fa-bars"></i>
              </div>
            </nav>
          </div>
          <!-- Song Details -->
          <div class="details">
            <img src="src/Rihanna.JPG" class="song-img" />
            <h3 class="title">Diamonds</h3>
            <p class="artist">Rihanna. Barbados</p>
          </div>

          <audio id="song">
            <source src="src/music/Rihanna-Diamonds.mp3" type="audio/mpeg" />
          </audio>
          <!-- player controls -->
          <div class="song-timer">
            <span class="current-time">00:12</span>
            <span class="duration-time">4:10</span>
          </div>
          <!-- song duration -->
          <div class="duration">
            <input type="range" min="0" max="100" value="0" id="progress" />
          </div>
          <!-- Buttons -->
          <div class="controls">
            <div><i class="fa-solid fa-backward"></i></div>
            <div onclick="playPause()">
              <i class="fa-solid fa-play" id="ctrlIcon"></i>
            </div>
            <div><i class="fa-solid fa-forward"></i></div>
          </div>
          <!-- Autoplay -->
          <div class="play-all">
            <i class="fa-solid fa-repeat"></i>
          </div>
          <!-- Volume -->
          <div class="volume">
            <p id="show-volume">50</p>
            <i class="fa-solid fa-volume-high" id="volume-icon"></i>
            <input type="range" min="0" max="100" value="50" id="volume" />
          </div>
        </div>
      </div>
      <!--Playlist -->
      <div class="music-playlist">
        <div class="header playlist-header">
          <i class="fa-solid fa-music"></i>
          <h3>Playlist</h3>
          <i class="fa-solid fa-xmark"></i>
        </div>
        <!--Playlist Items -->
        <div class="playlist-div">
          <div class="playlist">
            <span class="song-index">1.</span>
            <p class="single-song">Song one</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      let progress = document.getElementById("progress");
      let song = document.getElementById("song");
      let ctrlIcon = document.getElementById("ctrlIcon");

      song.onloadedmetadata = function () {
        progress.max = song.duration;
        progress.value = song.currentTime;
      };

      function playPause() {
        if (ctrlIcon.classList.contains("fa-pause")) {
          song.pause();
          ctrlIcon.classList.remove("fa-pause");
          ctrlIcon.classList.add("fa-play");
        } else {
          song.play();
          ctrlIcon.classList.add("fa-pause");
          ctrlIcon.classList.remove("fa-play");
        }
      }
      if (song.play()) {
        setInterval(() => {
          progress.value = song.currentTime;
        }, 500);
      }

      progress.onchange = function () {
        song.play();
        song.currentTime = progress.value;
        ctrlIcon.classList.add("fa-pause");
        ctrlIcon.classList.remove("fa-play");
      };
    </script>
  </body>
</html>
